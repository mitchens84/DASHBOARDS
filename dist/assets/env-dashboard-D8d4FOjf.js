import{r as b,j as e,i as l,k as x,l as c,X as h,Y as g,m as p,n as u,o as j,P as B,p as N}from"./vendor-DG7lD9Pa.js";const I=()=>{var v,w,C,F,D,M,T,$,S,H,k,P,L,O,K,E;const[r,A]=b.useState([]),[y,R]=b.useState("24h");b.useEffect(()=>{(async()=>{try{const s=document.getElementById("csv-data").value,f=B.parse(s,{header:!0,dynamicTyping:!0,skipEmptyLines:!0}).data.filter(n=>n.Time&&n["Temperature (°C)"]).map(n=>({...n,timestamp:new Date(n.Time)})).sort((n,Y)=>n.timestamp-Y.timestamp);A(f)}catch(s){console.error("Error loading data:",s)}})()},[]);const V=()=>{if(!r.length)return[];const t=new Date(r[r.length-1].timestamp),s=y==="24h"?24:y==="7d"?168:720,d=new Date(t.getTime()-s*60*60*1e3);return r.filter(f=>f.timestamp>=d)},X=()=>r.length?r[r.length-1]:null,a=t=>{const s=r.map(d=>d[t]).filter(d=>d!==null&&!isNaN(d));return{min:N.min(s),max:N.max(s),avg:N.mean(s)}},i=X(),m=V(),o=(t,s)=>!t||isNaN(t)?"text-gray-600":t>s.high?"text-red-600":t>s.medium?"text-yellow-600":"text-green-600";return e.jsxs("div",{className:"p-4 bg-gray-50 min-h-screen",children:[e.jsx("textarea",{id:"csv-data",style:{display:"none"},defaultValue:`Time,Temperature (°C),Humidity (%),CO2 (ppm),PM2.5(μg/m³),PM10(μg/m³)
2024-09-24 15:15,28.0,79.7,462,3,3
[...full CSV content...]`}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Environmental Monitoring Dashboard"}),e.jsxs("select",{value:y,onChange:t=>R(t.target.value),className:"px-3 py-2 border rounded-md bg-white",children:[e.jsx("option",{value:"24h",children:"Last 24 Hours"}),e.jsx("option",{value:"7d",children:"Last 7 Days"}),e.jsx("option",{value:"30d",children:"Last 30 Days"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Temperature"}),e.jsxs("p",{className:`text-2xl font-bold ${o(i["Temperature (°C)"],{high:30,medium:25})}`,children:[(v=i["Temperature (°C)"])==null?void 0:v.toFixed(1),"°C"]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[e.jsxs("p",{children:["Min: ",(w=a("Temperature (°C)").min)==null?void 0:w.toFixed(1),"°C"]}),e.jsxs("p",{children:["Max: ",(C=a("Temperature (°C)").max)==null?void 0:C.toFixed(1),"°C"]}),e.jsxs("p",{children:["Avg: ",(F=a("Temperature (°C)").avg)==null?void 0:F.toFixed(1),"°C"]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Humidity"}),e.jsxs("p",{className:`text-2xl font-bold ${o(i["Humidity (%)"],{high:80,medium:60})}`,children:[(D=i["Humidity (%)"])==null?void 0:D.toFixed(1),"%"]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[e.jsxs("p",{children:["Min: ",(M=a("Humidity (%)").min)==null?void 0:M.toFixed(1),"%"]}),e.jsxs("p",{children:["Max: ",(T=a("Humidity (%)").max)==null?void 0:T.toFixed(1),"%"]}),e.jsxs("p",{children:["Avg: ",($=a("Humidity (%)").avg)==null?void 0:$.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"CO₂"}),e.jsxs("p",{className:`text-2xl font-bold ${o(i["CO2 (ppm)"],{high:1e3,medium:800})}`,children:[(S=i["CO2 (ppm)"])==null?void 0:S.toFixed(0)," ppm"]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[e.jsxs("p",{children:["Min: ",(H=a("CO2 (ppm)").min)==null?void 0:H.toFixed(0)," ppm"]}),e.jsxs("p",{children:["Max: ",(k=a("CO2 (ppm)").max)==null?void 0:k.toFixed(0)," ppm"]}),e.jsxs("p",{children:["Avg: ",(P=a("CO2 (ppm)").avg)==null?void 0:P.toFixed(0)," ppm"]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"PM2.5"}),e.jsxs("p",{className:`text-2xl font-bold ${o(i["PM2.5(μg/m³)"],{high:35,medium:12})}`,children:[(L=i["PM2.5(μg/m³)"])==null?void 0:L.toFixed(1)," μg/m³"]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[e.jsxs("p",{children:["Min: ",(O=a("PM2.5(μg/m³)").min)==null?void 0:O.toFixed(1)," μg/m³"]}),e.jsxs("p",{children:["Max: ",(K=a("PM2.5(μg/m³)").max)==null?void 0:K.toFixed(1)," μg/m³"]}),e.jsxs("p",{children:["Avg: ",(E=a("PM2.5(μg/m³)").avg)==null?void 0:E.toFixed(1)," μg/m³"]})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Temperature Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(l,{width:"100%",height:"100%",children:e.jsxs(x,{data:m,children:[e.jsx(c,{strokeDasharray:"3 3"}),e.jsx(h,{dataKey:"timestamp",tickFormatter:t=>{const s=new Date(t);return`${s.getMonth()+1}/${s.getDate()} ${s.getHours()}:${String(s.getMinutes()).padStart(2,"0")}`}}),e.jsx(g,{domain:["auto","auto"]}),e.jsx(p,{labelFormatter:t=>new Date(t).toLocaleString(),formatter:t=>[`${t.toFixed(1)}°C`,"Temperature"]}),e.jsx(u,{}),e.jsx(j,{type:"monotone",dataKey:"Temperature (°C)",stroke:"#ef4444",dot:!1,name:"Temperature"})]})})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Humidity Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(l,{width:"100%",height:"100%",children:e.jsxs(x,{data:m,children:[e.jsx(c,{strokeDasharray:"3 3"}),e.jsx(h,{dataKey:"timestamp",tickFormatter:t=>{const s=new Date(t);return`${s.getMonth()+1}/${s.getDate()} ${s.getHours()}:${String(s.getMinutes()).padStart(2,"0")}`}}),e.jsx(g,{domain:["auto","auto"]}),e.jsx(p,{labelFormatter:t=>new Date(t).toLocaleString(),formatter:t=>[`${t.toFixed(1)}%`,"Humidity"]}),e.jsx(u,{}),e.jsx(j,{type:"monotone",dataKey:"Humidity (%)",stroke:"#3b82f6",dot:!1,name:"Humidity"})]})})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"CO₂ Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(l,{width:"100%",height:"100%",children:e.jsxs(x,{data:m,children:[e.jsx(c,{strokeDasharray:"3 3"}),e.jsx(h,{dataKey:"timestamp",tickFormatter:t=>{const s=new Date(t);return`${s.getMonth()+1}/${s.getDate()} ${s.getHours()}:${String(s.getMinutes()).padStart(2,"0")}`}}),e.jsx(g,{domain:["auto","auto"]}),e.jsx(p,{labelFormatter:t=>new Date(t).toLocaleString(),formatter:t=>[`${t.toFixed(0)} ppm`,"CO₂"]}),e.jsx(u,{}),e.jsx(j,{type:"monotone",dataKey:"CO2 (ppm)",stroke:"#84cc16",dot:!1,name:"CO₂"})]})})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"PM2.5 Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(l,{width:"100%",height:"100%",children:e.jsxs(x,{data:m,children:[e.jsx(c,{strokeDasharray:"3 3"}),e.jsx(h,{dataKey:"timestamp",tickFormatter:t=>{const s=new Date(t);return`${s.getMonth()+1}/${s.getDate()} ${s.getHours()}:${String(s.getMinutes()).padStart(2,"0")}`}}),e.jsx(g,{domain:["auto","auto"]}),e.jsx(p,{labelFormatter:t=>new Date(t).toLocaleString(),formatter:t=>[`${t.toFixed(1)} μg/m³`,"PM2.5"]}),e.jsx(u,{}),e.jsx(j,{type:"monotone",dataKey:"PM2.5(μg/m³)",stroke:"#a855f7",dot:!1,name:"PM2.5"})]})})})]})]})]})]})};export{I as default};
