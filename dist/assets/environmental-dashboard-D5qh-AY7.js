import{r as M,j as e,i as g,k as j,l as v,X as N,Y as f,m as b,o as w,P as _,p as i,T as $}from"./vendor-DG7lD9Pa.js";const R=()=>{var B,A,F,E,k,T,C,D;const[r,K]=M.useState([]),[u,L]=M.useState([]);M.useEffect(()=>{(async()=>{try{const n=await window.fs.readFile("The_historical_data_of_Air Monitor Lite_20241024151138.csv",{encoding:"utf8"}),m=_.parse(n,{header:!0,dynamicTyping:!0,skipEmptyLines:!0}).data.map(s=>({time:new Date(s.Time),temperature:s["Temperature (°C)"],humidity:s["Humidity (%)"],co2:s["CO2 (ppm)"],pm25:s["PM2.5(μg/m³)"],pm10:s["PM10(μg/m³)"]})).filter(s=>!isNaN(s.time.getTime()));K(m);const x=i.chain(m).groupBy(s=>s.time.getHours()).mapValues(s=>({temperature:i.meanBy(s,d=>d.temperature),humidity:i.meanBy(s,d=>d.humidity),co2:i.meanBy(s,d=>d.co2),pm25:i.meanBy(s,d=>d.pm25)})).map((s,d)=>({hour:parseInt(d),...s})).sortBy("hour").value();L(x)}catch(n){console.error("Error loading data:",n)}})()},[]);const p=({title:t,value:n,unit:c,stats:m,threshold:x,thresholdType:s="max",status:d})=>{var h,a,P;return e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 uppercase",children:t}),d==="warning"&&e.jsx($,{className:"w-4 h-4 text-yellow-500"})]}),e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Current Reading"}),e.jsxs("div",{className:"flex items-baseline mb-3",children:[e.jsx("span",{className:"text-2xl font-bold",children:typeof n=="number"?n.toFixed(1):"—"}),e.jsx("span",{className:"ml-1 text-gray-500 text-sm",children:c})]}),e.jsx("div",{className:"text-xs",children:e.jsxs("div",{className:"flex justify-between items-center border-t pt-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-gray-600",children:"MIN"}),e.jsx("div",{className:"text-lg font-semibold",children:(h=m==null?void 0:m.min)==null?void 0:h.toFixed(1)}),e.jsx("div",{className:"text-gray-500",children:c})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-gray-600",children:"MEAN"}),e.jsx("div",{className:"text-lg font-semibold",children:(a=m==null?void 0:m.avg)==null?void 0:a.toFixed(1)}),e.jsx("div",{className:"text-gray-500",children:c})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-gray-600",children:"MAX"}),e.jsx("div",{className:"text-lg font-semibold",children:(P=m==null?void 0:m.max)==null?void 0:P.toFixed(1)}),e.jsx("div",{className:"text-gray-500",children:c})]})]})})]})},H=()=>{var t,n,c,m,x,s,d,h;return r.length===0?{}:{temperature:{min:(t=i.minBy(r,a=>a.temperature))==null?void 0:t.temperature,max:(n=i.maxBy(r,a=>a.temperature))==null?void 0:n.temperature,avg:i.meanBy(r,a=>a.temperature)},humidity:{min:(c=i.minBy(r,a=>a.humidity))==null?void 0:c.humidity,max:(m=i.maxBy(r,a=>a.humidity))==null?void 0:m.humidity,avg:i.meanBy(r,a=>a.humidity)},co2:{min:(x=i.minBy(r,a=>a.co2))==null?void 0:x.co2,max:(s=i.maxBy(r,a=>a.co2))==null?void 0:s.co2,avg:i.meanBy(r,a=>a.co2)},pm25:{min:(d=i.minBy(r,a=>a.pm25))==null?void 0:d.pm25,max:(h=i.maxBy(r,a=>a.pm25))==null?void 0:h.pm25,avg:i.meanBy(r,a=>a.pm25)}}},S=()=>{if(r.length===0)return{};const t=r[r.length-1];return{temperature:{value:t.temperature,status:t.temperature>26||t.temperature<20?"warning":"normal"},humidity:{value:t.humidity,status:t.humidity>60?"warning":"normal"},co2:{value:t.co2,status:t.co2>1e3?"warning":"normal"},pm25:{value:t.pm25,status:t.pm25>35?"warning":"normal"}}},l=t=>`${String(t).padStart(2,"0")}:00`,o=S(),y=H();return e.jsx("div",{className:"p-4 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Indoor Environmental Quality Monitor"}),e.jsx("div",{className:"text-sm text-gray-500",children:r.length>0?`Last updated: ${r[r.length-1].time.toLocaleString()}`:"Loading..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(p,{title:"MEAN TEMPERATURE",value:(B=o.temperature)==null?void 0:B.value,unit:"°C",threshold:26,status:(A=o.temperature)==null?void 0:A.status,stats:y.temperature}),e.jsx(p,{title:"MEAN HUMIDITY",value:(F=o.humidity)==null?void 0:F.value,unit:"%",threshold:60,status:(E=o.humidity)==null?void 0:E.status,stats:y.humidity}),e.jsx(p,{title:"MEAN CO₂",value:(k=o.co2)==null?void 0:k.value,unit:"ppm",threshold:1e3,status:(T=o.co2)==null?void 0:T.status,stats:y.co2}),e.jsx(p,{title:"MEAN PM2.5",value:(C=o.pm25)==null?void 0:C.value,unit:"μg/m³",threshold:35,status:(D=o.pm25)==null?void 0:D.status,stats:y.pm25})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-4 uppercase",children:"Average Daily Temperature Pattern"}),e.jsx("div",{className:"h-64",children:e.jsx(g,{width:"100%",height:"100%",children:e.jsxs(j,{data:u,margin:{top:5,right:20,bottom:5,left:0},children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"hour",tickFormatter:l,type:"number",domain:[0,23]}),e.jsx(f,{domain:["auto","auto"]}),e.jsx(b,{labelFormatter:t=>l(t),formatter:t=>[`${t.toFixed(1)}°C`,"Temperature"]}),e.jsx(w,{type:"monotone",dataKey:"temperature",stroke:"#2563eb",dot:!1})]})})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-4 uppercase",children:"Average Daily CO₂ Pattern"}),e.jsx("div",{className:"h-64",children:e.jsx(g,{width:"100%",height:"100%",children:e.jsxs(j,{data:u,margin:{top:5,right:20,bottom:5,left:0},children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"hour",tickFormatter:l,type:"number",domain:[0,23]}),e.jsx(f,{domain:["auto","auto"]}),e.jsx(b,{labelFormatter:t=>l(t),formatter:t=>[`${t.toFixed(0)} ppm`,"CO₂"]}),e.jsx(w,{type:"monotone",dataKey:"co2",stroke:"#dc2626",dot:!1})]})})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-4 uppercase",children:"Average Daily Humidity Pattern"}),e.jsx("div",{className:"h-64",children:e.jsx(g,{width:"100%",height:"100%",children:e.jsxs(j,{data:u,margin:{top:5,right:20,bottom:5,left:0},children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"hour",tickFormatter:l,type:"number",domain:[0,23]}),e.jsx(f,{domain:["auto","auto"]}),e.jsx(b,{labelFormatter:t=>l(t),formatter:t=>[`${t.toFixed(1)}%`,"Humidity"]}),e.jsx(w,{type:"monotone",dataKey:"humidity",stroke:"#0891b2",dot:!1})]})})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-4 uppercase",children:"Average Daily PM2.5 Pattern"}),e.jsx("div",{className:"h-64",children:e.jsx(g,{width:"100%",height:"100%",children:e.jsxs(j,{data:u,margin:{top:5,right:20,bottom:5,left:0},children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"hour",tickFormatter:l,type:"number",domain:[0,23]}),e.jsx(f,{domain:["auto","auto"]}),e.jsx(b,{labelFormatter:t=>l(t),formatter:t=>[`${t.toFixed(1)} μg/m³`,"PM2.5"]}),e.jsx(w,{type:"monotone",dataKey:"pm25",stroke:"#7c3aed",dot:!1})]})})})]})]})]})})};export{R as default};
