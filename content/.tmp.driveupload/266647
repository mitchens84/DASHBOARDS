import React, { useState } from 'react';
import { Card } from '@/components/ui/card';
import { Progress } from '@/components/ui/progress';
import { Alert } from '@/components/ui/alert';
import { Table } from '@/components/ui/table';
import { Tag } from '@/components/ui/tag';
import { Tooltip } from '@/components/ui/tooltip';
import { Info, Shield, Droplets, Leaf, AlertTriangle, Sun, ThermometerSun } from 'lucide-react';

const SafetyDashboard = () => {
  const [activeCategory, setActiveCategory] = useState('uv-filters');
  
  const categories = [
    { id: 'uv-filters', label: 'UV Filters', icon: Sun },
    { id: 'actives', label: 'Active Ingredients', icon: Leaf },
    { id: 'safety', label: 'Safety Profile', icon: Shield },
    { id: 'environmental', label: 'Environmental Impact', icon: ThermometerSun }
  ];

  const uvFilters = [
    {
      name: 'Ethylhexyl Triazone',
      safety: 90,
      benefit: 100,
      type: 'UVB',
      photostability: 98,
      concerns: ['Environmental persistence'],
      benefits: ['High UVB protection', 'Photostable', 'Low penetration']
    },
    {
      name: 'Drometrizole Trisiloxane',
      safety: 85,
      benefit: 95,
      type: 'Broad Spectrum',
      photostability: 95,
      concerns: ['Siloxane accumulation'],
      benefits: ['UVA & UVB protection', 'Highly photostable']
    }
  ];

  const activeIngredients = [
    {
      name: 'Rice Seed Water',
      concentration: '30%',
      evidenceLevel: 'Strong',
      benefits: ['Antioxidant', 'Soothing', 'Brightening'],
      safetyProfile: 'Excellent'
    },
    {
      name: 'Panthenol',
      concentration: '1-5%',
      evidenceLevel: 'Strong',
      benefits: ['Barrier repair', 'Anti-inflammatory', 'Wound healing'],
      safetyProfile: 'Excellent'
    }
  ];

  const ProgressBar = ({ value, label }) => (
    <div className="w-full">
      <div className="flex justify-between mb-1">
        <span className="text-sm">{label}</span>
        <span className="text-sm font-semibold">{value}%</span>
      </div>
      <Progress value={value} className="h-2" />
    </div>
  );

  const renderUVFilters = () => (
    <div className="space-y-6">
      {uvFilters.map(filter => (
        <Card key={filter.name} className="p-4">
          <div className="flex justify-between items-start mb-4">
            <div>
              <h3 className="text-lg font-semibold">{filter.name}</h3>
              <Tag className="mt-1">{filter.type}</Tag>
            </div>
            <Tooltip content="View detailed information">
              <Info className="w-5 h-5 text-blue-500 cursor-pointer" />
            </Tooltip>
          </div>
          
          <div className="space-y-4">
            <ProgressBar label="Safety Rating" value={filter.safety} />
            <ProgressBar label="Benefit Rating" value={filter.benefit} />
            <ProgressBar label="Photostability" value={filter.photostability} />
          </div>

          <div className="mt-4">
            <h4 className="font-medium mb-2">Benefits</h4>
            <div className="flex flex-wrap gap-2">
              {filter.benefits.map(benefit => (
                <Tag key={benefit} className="bg-green-100">{benefit}</Tag>
              ))}
            </div>
          </div>

          {filter.concerns.length > 0 && (
            <Alert variant="warning" className="mt-4">
              <AlertTriangle className="w-4 h-4 mr-2" />
              {filter.concerns.join(', ')}
            </Alert>
          )}
        </Card>
      ))}
    </div>
  );

  const renderActiveIngredients = () => (
    <div className="space-y-6">
      {activeIngredients.map(ingredient => (
        <Card key={ingredient.name} className="p-4">
          <div className="flex justify-between items-start mb-4">
            <div>
              <h3 className="text-lg font-semibold">{ingredient.name}</h3>
              <div className="flex gap-2 mt-1">
                <Tag>Concentration: {ingredient.concentration}</Tag>
                <Tag className="bg-blue-100">Evidence: {ingredient.evidenceLevel}</Tag>
              </div>
            </div>
          </div>

          <div className="mt-4">
            <h4 className="font-medium mb-2">Benefits</h4>
            <div className="flex flex-wrap gap-2">
              {ingredient.benefits.map(benefit => (
                <Tag key={benefit} className="bg-green-100">{benefit}</Tag>
              ))}
            </div>
          </div>
        </Card>
      ))}
    </div>
  );

  const renderContent = () => {
    switch (activeCategory) {
      case 'uv-filters':
        return renderUVFilters();
      case 'actives':
        return renderActiveIngredients();
      default:
        return null;
    }
  };

  return (
    <div className="max-w-4xl mx-auto p-6">
      <div className="mb-8">
        <h1 className="text-2xl font-bold mb-2">Sunscreen Safety & Benefits Dashboard</h1>
        <p className="text-gray-600">Relief Sun Aqua-Fresh: Rice + B5 (SPF50+ PA++++)</p>
      </div>

      <div className="flex gap-4 mb-6">
        {categories.map(category => (
          <button
            key={category.id}
            onClick={() => setActiveCategory(category.id)}
            className={`flex items-center gap-2 px-4 py-2 rounded-lg ${
              activeCategory === category.id 
              ? 'bg-blue-100 text-blue-700' 
              : 'bg-gray-50 hover:bg-gray-100'
            }`}
          >
            <category.icon className="w-5 h-5" />
            {category.label}
          </button>
        ))}
      </div>

      {renderContent()}
    </div>
  );
};

export default SafetyDashboard;
